<div id="container-registration">
  <div class="container" id="registration">
    <div class="d-flex justify-content-center h-100">
      <div class="card">
        <div class="card-header">
          <br />
          <h1>Get a new account!</h1>
        </div>
        <div class="card-body">
          <form [formGroup]="form" (ngSubmit)="onSubmit()">
            <div class="form-group row">
              <div class="col">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text"
                      ><i class="fas fa-user"></i
                    ></span>
                  </div>
                  <mat-form-field appearance="fill">
                    <mat-label>Username</mat-label>
                    <input type="text" matInput formControlName="username" />
                    <mat-error
                      *ngIf="
                        form.controls.username.hasError('maxlength') &&
                        !form.controls.username.hasError('required')
                      "
                    >
                      Please enter a valid username, <strong>maximum length</strong> is 20
                      characters.
                    </mat-error>
                    <mat-error
                      *ngIf="form.controls.username.hasError('required')"
                    >
                      Username is <strong>required</strong>
                    </mat-error>
                  </mat-form-field>
                </div>
                <br />
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text"
                      ><i class="fas fa-at"></i
                    ></span>
                  </div>
                  <mat-form-field appearance="fill">
                    <mat-label>Email</mat-label>
                    <input type="email" matInput formControlName="email" />
                    <mat-error
                      *ngIf="
                        form.controls.email.hasError('email') &&
                        !form.controls.email.hasError('required')
                      "
                    >
                      Please enter a <strong>valid email</strong> 
                    </mat-error>
                    <mat-error *ngIf="form.controls.email.hasError('required')">
                      Email is <strong>required</strong>
                    </mat-error>
                  </mat-form-field>
                </div>
                <br />
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text"
                      ><i class="fas fa-key"></i
                    ></span>
                  </div>
                  <mat-form-field appearance="fill">
                    <mat-label>Password</mat-label>
                    <input
                      type="password"
                      matInput
                      formControlName="password"
                    />
                    <mat-error
                      *ngIf="
                        form.controls.password.hasError('minlength') &&
                        !form.controls.password.hasError('maxlength') &&
                        !form.controls.password.hasError('required')
                      "
                    >
                      Please enter a valid password, <strong>minimum length</strong> is 8 characters
                    </mat-error>
                    <mat-error
                      *ngIf="
                        form.controls.password.hasError('maxlength') &&
                        !form.controls.password.hasError('minlength') &&
                        !form.controls.password.hasError('required')
                      "
                    >
                      Please enter a valid password, <strong>maximum length</strong> is 20
                      characters.
                    </mat-error>
                    <mat-error
                      *ngIf="form.controls.password.hasError('required')"
                    >
                      Password is <strong>required</strong>
                    </mat-error>
                  </mat-form-field>
                </div>
                <br />
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text"
                      ><i class="fas fa-key"></i
                    ></span>
                  </div>
                  <mat-form-field appearance="fill">
                    <mat-label>Confirm Password</mat-label>
                    <input
                      type="password"
                      matInput
                      formControlName="password2"
                    />
                    <mat-error
                      *ngIf="form.controls.password2.hasError('required')"
                    >
                      Please confirm your password
                    </mat-error>
                    <mat-error
                      *ngIf="form.controls.password2.hasError('mustMatch')"
                    >
                      Passwords <strong>must match</strong> 
                    </mat-error>
                  </mat-form-field>
                </div>
                <br />
              </div>
              <div class="col">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text"
                      ><i class="fas fa-user"></i
                    ></span>
                  </div>
                  <mat-form-field appearance="fill">
                    <mat-label>First Name</mat-label>
                    <input type="text" matInput formControlName="first_name" />
                  </mat-form-field>
                </div>
                <br />
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text"
                      ><i class="fas fa-user"></i
                    ></span>
                  </div>
                  <mat-form-field appearance="fill">
                    <mat-label>Last Name</mat-label>
                    <input type="text" matInput formControlName="last_name" />
                  </mat-form-field>
                </div>
                <br />
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text icon-groups"
                      ><i class="fas fa-users"></i
                    ></span>
                  </div>
                  <mat-form-field appearance="fill" color="white">
                    <mat-label>Groups</mat-label>
                    <mat-select formControlName="groups" multiple>
                      <mat-option
                        *ngFor="let group of groups"
                        [value]="group"
                        >{{ group.name }}</mat-option
                      >
                    </mat-select>
                    <mat-error
                      *ngIf="form.controls.groups.hasError('required')"
                    >
                      Choise of a group is required
                    </mat-error>
                  </mat-form-field>
                </div>
                <br />
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text"
                      ><i class="fas fa-user-astronaut"></i
                    ></span>
                  </div>
                  <div class="row align-items-center remember">
                    <input type="checkbox" formControlName="is_staff" /> You're
                    staff ?
                  </div>
                </div>
              </div>
            </div>
            <button type="submit" [disabled]="form.invalid" class="btn">
              Sign Up
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
